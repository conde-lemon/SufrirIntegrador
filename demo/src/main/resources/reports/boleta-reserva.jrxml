<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="boleta-reserva" pageWidth="595" pageHeight="842" columnWidth="555"
              leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">

    <!-- ============================= -->
    <!--        PARAMETERS             -->
    <!-- ============================= -->
    <parameter name="P_RESERVA_ID" class="java.lang.String"/>
    <parameter name="P_FECHA_EMISION" class="java.lang.String"/>
    <parameter name="P_CLIENTE_NOMBRE" class="java.lang.String"/>
    <parameter name="P_CLIENTE_EMAIL" class="java.lang.String"/>
    <parameter name="P_MONEDA" class="java.lang.String"/>
    <parameter name="P_TOTAL" class="java.math.BigDecimal"/>
    <parameter name="P_LOGO_STREAM" class="java.io.InputStream"/>

    <!-- ============================= -->
    <!--          FIELDS               -->
    <!-- ============================= -->
    <field name="nombre" class="java.lang.String"/>
    <field name="apellido" class="java.lang.String"/>
    <field name="documento" class="java.lang.String"/>
    <field name="fechaNacimiento" class="java.time.LocalDate"/>
    <field name="sexo" class="java.lang.String"/>
    <field name="correo" class="java.lang.String"/>
    <field name="telefono" class="java.lang.String"/>
    <field name="asientoSeleccionado" class="java.lang.String"/>
    <field name="puertaAbordaje" class="java.lang.String"/>
    <field name="fechaSalida" class="java.time.LocalDate"/>
    <field name="horaSalida" class="java.lang.String"/>
    <field name="cantidad" class="java.lang.Integer"/>
    <field name="precioUnitario" class="java.math.BigDecimal"/>
    <field name="subtotal" class="java.math.BigDecimal"/>
    <field name="servicio" class="com.travel4u.demo.servicio.model.Servicio"/>

    <!-- ============================= -->
    <!--          TITLE BAND           -->
    <!-- ============================= -->
    <title>
        <band height="90">

            <!-- LOGO -->
            <image>
                <reportElement x="0" y="0" width="150" height="50"/>
                <imageExpression class="java.io.InputStream"><![CDATA[$P{P_LOGO_STREAM}]]></imageExpression>
            </image>

            <staticText>
                <reportElement x="160" y="5" width="395" height="45" forecolor="#8723FF"/>
                <textElement textAlignment="Right">
                    <font size="26" isBold="true"/>
                </textElement>
                <text><![CDATA[BOLETA DE RESERVA]]></text>
            </staticText>

            <line>
                <reportElement x="0" y="75" width="555" height="1" forecolor="#CCCCCC"/>
            </line>

        </band>
    </title>

    <!-- ============================= -->
    <!--      PAGE HEADER              -->
    <!-- ============================= -->
    <pageHeader>
        <band height="95">

            <!-- Código -->
            <staticText>
                <reportElement x="0" y="5" width="135" height="20"/>
                <text><![CDATA[Código de Reserva:]]></text>
            </staticText>

            <textField>
                <reportElement x="140" y="5" width="150" height="20"/>
                <textFieldExpression><![CDATA["TFU-" + $P{P_RESERVA_ID}]]></textFieldExpression>
            </textField>

            <!-- Fecha -->
            <staticText>
                <reportElement x="300" y="5" width="135" height="20"/>
                <text><![CDATA[Fecha de Emisión:]]></text>
            </staticText>

            <textField>
                <reportElement x="440" y="5" width="110" height="20"/>
                <textFieldExpression><![CDATA[$P{P_FECHA_EMISION}]]></textFieldExpression>
            </textField>

            <!-- Cliente -->
            <staticText>
                <reportElement x="0" y="35" width="135" height="20"/>
                <text><![CDATA[Cliente:]]></text>
            </staticText>

            <textField>
                <reportElement x="140" y="35" width="200" height="20"/>
                <textFieldExpression><![CDATA[$P{P_CLIENTE_NOMBRE}]]></textFieldExpression>
            </textField>

            <!-- Email -->
            <staticText>
                <reportElement x="300" y="35" width="135" height="20"/>
                <text><![CDATA[Email:]]></text>
            </staticText>

            <textField>
                <reportElement x="440" y="35" width="200" height="20"/>
                <textFieldExpression><![CDATA[$P{P_CLIENTE_EMAIL}]]></textFieldExpression>
            </textField>

        </band>
    </pageHeader>

    <!-- ============================= -->
    <!--   COLUMN HEADERS (TABLA)      -->
    <!-- ============================= -->
    <columnHeader>
        <band height="30">

            <staticText>
                <reportElement x="0" y="5" width="235" height="20" backcolor="#F0F0F0" mode="Opaque"/>
                <textElement textAlignment="Center"><font isBold="true"/></textElement>
                <text><![CDATA[Concepto]]></text>
            </staticText>

            <staticText>
                <reportElement x="235" y="5" width="80" height="20" backcolor="#F0F0F0" mode="Opaque"/>
                <textElement textAlignment="Center"><font isBold="true"/></textElement>
                <text><![CDATA[Cant.]]></text>
            </staticText>

            <staticText>
                <reportElement x="315" y="5" width="120" height="20" backcolor="#F0F0F0" mode="Opaque"/>
                <textElement textAlignment="Center"><font isBold="true"/></textElement>
                <text><![CDATA[Precio Unitario]]></text>
            </staticText>

            <staticText>
                <reportElement x="435" y="5" width="120" height="20" backcolor="#F0F0F0" mode="Opaque"/>
                <textElement textAlignment="Center"><font isBold="true"/></textElement>
                <text><![CDATA[Subtotal]]></text>
            </staticText>

        </band>
    </columnHeader>

    <!-- ============================= -->
    <!--           DETAIL               -->
    <!-- ============================= -->
    <detail>
        <band height="120">

            <!-- Concepto -->
            <textField>
                <reportElement x="0" y="0" width="235" height="20"/>
                <textFieldExpression><![CDATA[$F{servicio}.getNombre()]]></textFieldExpression>
            </textField>

            <!-- Cantidad -->
            <textField>
                <reportElement x="235" y="0" width="80" height="20"/>
                <textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
            </textField>

            <!-- Precio -->
            <textField pattern="#,##0.00">
                <reportElement x="315" y="0" width="120" height="20"/>
                <textFieldExpression><![CDATA[$F{precioUnitario}]]></textFieldExpression>
            </textField>

            <!-- Subtotal -->
            <textField pattern="#,##0.00">
                <reportElement x="435" y="0" width="120" height="20"/>
                <textFieldExpression><![CDATA[$F{subtotal}]]></textFieldExpression>
            </textField>

            <!-- Caja gris -->
            <rectangle>
                <reportElement x="0" y="25" width="555" height="90" backcolor="#FAFAFA" mode="Opaque"/>
            </rectangle>

            <!-- Pasajero -->
            <textField>
                <reportElement x="10" y="30" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Pasajero: " + $F{nombre} + " " + $F{apellido}
                ]]></textFieldExpression>
            </textField>

            <!-- Documento -->
            <textField>
                <reportElement x="10" y="50" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Documento: " + $F{documento}
                ]]></textFieldExpression>
            </textField>

            <!-- Sexo -->
            <textField>
                <reportElement x="10" y="70" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Sexo: " + $F{sexo}
                ]]></textFieldExpression>
            </textField>

            <!-- Teléfono -->
            <textField>
                <reportElement x="10" y="90" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Teléfono: " + $F{telefono}
                ]]></textFieldExpression>
            </textField>

            <!-- Origen -->
            <textField>
                <reportElement x="280" y="30" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Origen: " + $F{servicio}.getOrigen()
                ]]></textFieldExpression>
            </textField>

            <!-- Destino -->
            <textField>
                <reportElement x="280" y="50" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Destino: " + $F{servicio}.getDestino()
                ]]></textFieldExpression>
            </textField>

            <!-- Puerta -->
            <textField>
                <reportElement x="280" y="70" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Puerta: " + $F{puertaAbordaje}
                ]]></textFieldExpression>
            </textField>

            <!-- Salida -->
            <textField>
                <reportElement x="280" y="90" width="250" height="15"/>
                <textFieldExpression><![CDATA[
                    "Salida: " + $F{fechaSalida} + " " + $F{horaSalida}
                ]]></textFieldExpression>
            </textField>

        </band>
    </detail>

    <!-- ============================= -->
    <!--             SUMMARY           -->
    <!-- ============================= -->
    <summary>
        <band height="100">

            <line>
                <reportElement x="315" y="15" width="240" height="1"/>
            </line>

            <staticText>
                <reportElement x="315" y="30" width="120" height="25"/>
                <textElement textAlignment="Right"><font size="14" isBold="true"/></textElement>
                <text><![CDATA[TOTAL:]]></text>
            </staticText>

            <textField pattern="#,##0.00">
                <reportElement x="435" y="30" width="120" height="25"/>
                <textFieldExpression><![CDATA[$P{P_TOTAL}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="405" y="30" width="30" height="25"/>
                <textFieldExpression><![CDATA[$P{P_MONEDA}]]></textFieldExpression>
            </textField>

        </band>
    </summary>

</jasperReport>
