<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Reservas - Travel For U</title>
    <!-- Usamos Thymeleaf para las rutas de CSS -->
    <link rel="stylesheet" th:href="@{/css/header_style.css}">
    <link rel="stylesheet" th:href="@{/css/reservas_style.css}">
</head>

<body>
<!-- Incluimos el fragmento del header -->
<div th:replace="~{fragments/header :: main-header}"></div>

<div class="container">
    <div class="page-header">
        <h1 class="page-title">Mis Reservas</h1>
        <p class="page-subtitle">Gestiona y revisa todas tus reservas de viaje</p>
    </div>

    <!-- Mensaje de éxito (si vienes de crear una reserva) -->
    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

    <!-- Si no hay reservas, muestra un mensaje amigable -->
    <div th:if="${reservas.isEmpty()}" class="no-reservations">
        <p>Aún no tienes ninguna reserva. ¡Anímate a planificar tu próximo viaje!</p>
        <a th:href="@{/}" class="btn btn-primary">Buscar Ofertas</a>
    </div>

    <!-- Grid para mostrar las tarjetas de reservas dinámicas -->
    <div class="reservations-grid" th:if="${!reservas.isEmpty()}">
        <!-- Iteramos sobre la lista de reservas del usuario -->
        <div class="reservation-card" th:each="reserva : ${reservas}">
            <div class="reservation-header">
                <div class="reservation-title" th:text="${reserva.observaciones ?: 'Reserva General'}">Vuelo a Buenos Aires</div>
                <div class="reservation-code" th:text="'Código: TFU-' + ${reserva.idReserva}">Código: TFU-123</div>
            </div>
            <div class="reservation-body">
                <div class="reservation-details">
                    <div class="detail-item">
                        <span class="detail-label">Fecha de Reserva</span>
                        <span class="detail-value" th:text="${#temporals.format(reserva.createdAt, 'dd MMM yyyy')}">10 Oct 2025</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Fecha de Viaje</span>
                        <span class="detail-value" th:text="${#temporals.format(reserva.fechaInicio, 'dd MMM yyyy')}">15 Oct 2025</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Estado</span>
                        <!-- Añadimos clases dinámicas para el color del estado -->
                        <span class="reservation-status"
                              th:text="${reserva.estado}"
                              th:classappend="${reserva.estado == 'Confirmada' ? 'status-confirmed' : (reserva.estado == 'Cancelada' ? 'status-cancelled' : 'status-pending')}">
                                  Confirmada
                        </span>
                    </div>
                </div>
            </div>
            <div class="reservation-footer">
                <div class="reservation-price" th:text="'S/ ' + ${#numbers.formatDecimal(reserva.total, 1, 'COMMA', 2, 'POINT')}">S/ 350.00</div>
                <div class="action-buttons">
                    <!-- Estos botones están listos para añadir funcionalidad en el futuro -->
                    <a href="#" class="btn btn-outline">Ver Detalles</a>
                    <a href="#" class="btn btn-primary">Descargar PDF</a>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>