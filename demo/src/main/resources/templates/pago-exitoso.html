<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pago Exitoso - Travel4U</title>
    <link rel="stylesheet" th:href="@{/css/confirmacion-pago.css}">
    <style>
        .success-animation {
            animation: bounceIn 0.8s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #7b1fa2;
            animation: confetti-fall 3s linear infinite;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="celebration" id="celebration"></div>
    
    <div class="confirmacion-container success-animation">
        <svg class="success-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
            <circle class="success-circle" cx="26" cy="26" r="25" fill="none"/>
            <path class="success-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
        </svg>

        <h1>ðŸŽ‰ Â¡Pago Exitoso! ðŸŽ‰</h1>
        <p class="subtitle">Tu reserva ha sido confirmada y procesada</p>

        <div class="monto-total" th:if="${reserva != null}">
            <div class="label">Monto Procesado</div>
            <div class="valor" th:text="'S/ ' + ${#numbers.formatDecimal(reserva.total, 1, 'COMMA', 2, 'POINT')}">S/ 895.00</div>
        </div>

        <div class="referencia" th:if="${referenciaPago}">
            <div class="referencia-label">CÃ³digo de TransacciÃ³n</div>
            <div class="referencia-codigo" th:text="${referenciaPago}">PP-XXXX-XXXX-XXXX</div>
        </div>

        <div class="detalle-pago">
            <div class="detalle-item">
                <span class="detalle-label">Reserva</span>
                <span class="detalle-valor" th:text="'TFU-' + ${reserva?.idReserva}">TFU-001</span>
            </div>
            <div class="detalle-item">
                <span class="detalle-label">Estado</span>
                <span class="detalle-valor status-confirmed">âœ… Confirmada</span>
            </div>
            <div class="detalle-item">
                <span class="detalle-label">Procesado</span>
                <span class="detalle-valor" th:text="${#temporals.format(#temporals.createNow(), 'dd/MM/yyyy HH:mm')}">Ahora</span>
            </div>
        </div>

        <div class="btn-container">
            <a th:href="@{/reservas/{id}(id=${reserva.idReserva})}" class="btn btn-primary">
                ðŸ“‹ Ver Reserva Completa
            </a>
            <a th:href="@{/boleta/reserva/{id}(id=${reserva.idReserva})}" class="btn btn-secondary" target="_blank">
                ðŸ“„ Descargar Comprobante
            </a>
        </div>

        <div class="info-adicional">
            <p>ðŸ“§ ConfirmaciÃ³n enviada a tu email</p>
            <p>ðŸ“± RecibirÃ¡s recordatorios antes de tu viaje</p>
        </div>
    </div>

    <script>
        // Crear confetti
        function createConfetti() {
            const celebration = document.getElementById('celebration');
            const colors = ['#7b1fa2', '#9c27b0', '#e91e63', '#ff4081', '#ffc107'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                celebration.appendChild(confetti);
            }
            
            // Limpiar confetti despuÃ©s de 5 segundos
            setTimeout(() => {
                celebration.innerHTML = '';
            }, 5000);
        }
        
        // Iniciar celebraciÃ³n
        setTimeout(createConfetti, 500);
    </script>
</body>
</html>